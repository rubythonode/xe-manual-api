<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>XpressEngine Core: HTMLPurifier_Encoder Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">XpressEngine Core
   &#160;<span id="projectnumber">1.7.5.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classHTMLPurifier__Encoder-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">HTMLPurifier_Encoder Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a8daf61530ad6f5219b3a2f2ec6d4de32"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTMLPurifier__Encoder.html#a8daf61530ad6f5219b3a2f2ec6d4de32">muteErrorHandler</a> ()</td></tr>
<tr class="separator:a8daf61530ad6f5219b3a2f2ec6d4de32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae177bdf5de75fd487d55fa87568366c8"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTMLPurifier__Encoder.html#ae177bdf5de75fd487d55fa87568366c8">unsafeIconv</a> ($in, $out, $text)</td></tr>
<tr class="separator:ae177bdf5de75fd487d55fa87568366c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a149d8038f81dcd50f70598067b4444d8"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTMLPurifier__Encoder.html#a149d8038f81dcd50f70598067b4444d8">iconv</a> ($in, $out, $text, $max_chunk_size=8000)</td></tr>
<tr class="separator:a149d8038f81dcd50f70598067b4444d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4903a5cfecda1c255647e87106cc686b"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTMLPurifier__Encoder.html#a4903a5cfecda1c255647e87106cc686b">cleanUTF8</a> ($str, $force_php=false)</td></tr>
<tr class="separator:a4903a5cfecda1c255647e87106cc686b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ce3abe9bf916a9ec35014f23255a408"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTMLPurifier__Encoder.html#a1ce3abe9bf916a9ec35014f23255a408">unichr</a> ($code)</td></tr>
<tr class="separator:a1ce3abe9bf916a9ec35014f23255a408"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9526f4471531a5455e5f0e560349226"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTMLPurifier__Encoder.html#ac9526f4471531a5455e5f0e560349226">iconvAvailable</a> ()</td></tr>
<tr class="separator:ac9526f4471531a5455e5f0e560349226"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6876fc3fbf0ae1ce1d06bd127fb55886"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTMLPurifier__Encoder.html#a6876fc3fbf0ae1ce1d06bd127fb55886">convertToUTF8</a> ($str, $config, $context)</td></tr>
<tr class="separator:a6876fc3fbf0ae1ce1d06bd127fb55886"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48bca7ecbdec1fde428a95fc2ec8fff9"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTMLPurifier__Encoder.html#a48bca7ecbdec1fde428a95fc2ec8fff9">convertFromUTF8</a> ($str, $config, $context)</td></tr>
<tr class="separator:a48bca7ecbdec1fde428a95fc2ec8fff9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60bc1be93b691bc03b1205103c839f7b"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTMLPurifier__Encoder.html#a60bc1be93b691bc03b1205103c839f7b">convertToASCIIDumbLossless</a> ($str)</td></tr>
<tr class="separator:a60bc1be93b691bc03b1205103c839f7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad491b38d38ff9d9cdb6ea7d67a841de2"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTMLPurifier__Encoder.html#ad491b38d38ff9d9cdb6ea7d67a841de2">testIconvTruncateBug</a> ()</td></tr>
<tr class="separator:ad491b38d38ff9d9cdb6ea7d67a841de2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b50502a5abcacf711adb0f3b6bbcfb2"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTMLPurifier__Encoder.html#a7b50502a5abcacf711adb0f3b6bbcfb2">testEncodingSupportsASCII</a> ($encoding, $bypass=false)</td></tr>
<tr class="separator:a7b50502a5abcacf711adb0f3b6bbcfb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:abee6de7ca542a201ad9bd1ff762d4b6d"><td class="memItemLeft" align="right" valign="top">const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTMLPurifier__Encoder.html#abee6de7ca542a201ad9bd1ff762d4b6d">ICONV_OK</a> = 0</td></tr>
<tr class="separator:abee6de7ca542a201ad9bd1ff762d4b6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a275b2fb955a479eff7f6a4cdd49fdaf4"><td class="memItemLeft" align="right" valign="top">const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTMLPurifier__Encoder.html#a275b2fb955a479eff7f6a4cdd49fdaf4">ICONV_TRUNCATES</a> = 1</td></tr>
<tr class="separator:a275b2fb955a479eff7f6a4cdd49fdaf4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abba31caaa72f5cd8639d96326af31e4d"><td class="memItemLeft" align="right" valign="top">const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTMLPurifier__Encoder.html#abba31caaa72f5cd8639d96326af31e4d">ICONV_UNUSABLE</a> = 2</td></tr>
<tr class="separator:abba31caaa72f5cd8639d96326af31e4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A UTF-8 specific character encoder that handles cleaning and transforming. </p><dl class="section note"><dt>Note</dt><dd>All functions in this class should be static. </dd></dl>

<p>Definition at line <a class="el" href="Encoder_8php_source.html#l00007">7</a> of file <a class="el" href="Encoder_8php_source.html">Encoder.php</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a4903a5cfecda1c255647e87106cc686b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static HTMLPurifier_Encoder::cleanUTF8 </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$force_php</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Cleans a UTF-8 string for well-formedness and SGML validity</p>
<p>It will parse according to UTF-8 and return a valid UTF8 string, with non-SGML codepoints excluded.</p>
<dl class="section note"><dt>Note</dt><dd>Just for reference, the non-SGML code points are 0 to 31 and 127 to 159, inclusive. However, we allow code points 9, 10 and 13, which are the tab, line feed and carriage return respectively. 128 and above the code points map to multibyte UTF-8 representations.</dd>
<dd>
Fallback code adapted from utf8ToUnicode by Henri Sivonen and <a href="#" onclick="location.href='mai'+'lto:'+'hsi'+'vo'+'nen'+'@i'+'ki.'+'fi'; return false;">hsivo<span style="display: none;">.nosp@m.</span>nen@<span style="display: none;">.nosp@m.</span>iki.f<span style="display: none;">.nosp@m.</span>i</a> at <a href="http://iki.fi/hsivonen/php-utf8/">http://iki.fi/hsivonen/php-utf8/</a> under the LGPL license. Notes on what changed are inside, but in general, the original code transformed UTF-8 text into an array of integer Unicode codepoints. Understandably, transforming that back to a string would be somewhat expensive, so the function was modded to directly operate on the string. However, this discourages code reuse, and the logic enumerated here would be useful for any function that needs to be able to understand UTF-8 characters. As of right now, only smart lossless character encoding converters would need that, and I'm probably not going to implement them. Once again, PHP 6 should solve all our problems. </dd></dl>

<p>Definition at line <a class="el" href="Encoder_8php_source.html#l00109">109</a> of file <a class="el" href="Encoder_8php_source.html">Encoder.php</a>.</p>

</div>
</div>
<a class="anchor" id="a48bca7ecbdec1fde428a95fc2ec8fff9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static HTMLPurifier_Encoder::convertFromUTF8 </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Converts a string from UTF-8 based on configuration. </p><dl class="section note"><dt>Note</dt><dd>Currently, this is a lossy conversion, with unexpressable characters being omitted. </dd></dl>

<p>Definition at line <a class="el" href="Encoder_8php_source.html#l00366">366</a> of file <a class="el" href="Encoder_8php_source.html">Encoder.php</a>.</p>

</div>
</div>
<a class="anchor" id="a60bc1be93b691bc03b1205103c839f7b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static HTMLPurifier_Encoder::convertToASCIIDumbLossless </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$str</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Lossless (character-wise) conversion of HTML to ASCII </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$str</td><td>UTF-8 string to be converted to ASCII </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ASCII encoded string with non-ASCII character entity-ized </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Adapted from MediaWiki, claiming fair use: this is a common algorithm. If you disagree with this license fudgery, implement it yourself. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Uses decimal numeric entities since they are best supported. </dd>
<dd>
This is a DUMB function: it has no concept of keeping character entities that the projected character encoding can allow. We could possibly implement a smart version but that would require it to also know which Unicode codepoints the charset supported (not an easy task). </dd>
<dd>
Sort of with <a class="el" href="classHTMLPurifier__Encoder.html#a4903a5cfecda1c255647e87106cc686b">cleanUTF8()</a> but it assumes that $str is well-formed UTF-8 </dd></dl>

<p>Definition at line <a class="el" href="Encoder_8php_source.html#l00413">413</a> of file <a class="el" href="Encoder_8php_source.html">Encoder.php</a>.</p>

</div>
</div>
<a class="anchor" id="a6876fc3fbf0ae1ce1d06bd127fb55886"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static HTMLPurifier_Encoder::convertToUTF8 </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Converts a string to UTF-8 based on configuration. </p>

<p>Definition at line <a class="el" href="Encoder_8php_source.html#l00336">336</a> of file <a class="el" href="Encoder_8php_source.html">Encoder.php</a>.</p>

</div>
</div>
<a class="anchor" id="a149d8038f81dcd50f70598067b4444d8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static HTMLPurifier_Encoder::iconv </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$max_chunk_size</em> = <code>8000</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>iconv wrapper which mutes errors and works around bugs. </p>

<p>Definition at line <a class="el" href="Encoder_8php_source.html#l00035">35</a> of file <a class="el" href="Encoder_8php_source.html">Encoder.php</a>.</p>

</div>
</div>
<a class="anchor" id="ac9526f4471531a5455e5f0e560349226"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static HTMLPurifier_Encoder::iconvAvailable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="Encoder_8php_source.html#l00325">325</a> of file <a class="el" href="Encoder_8php_source.html">Encoder.php</a>.</p>

</div>
</div>
<a class="anchor" id="a8daf61530ad6f5219b3a2f2ec6d4de32"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static HTMLPurifier_Encoder::muteErrorHandler </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Error-handler that mutes errors, alternative to shut-up operator. </p>

<p>Definition at line <a class="el" href="Encoder_8php_source.html#l00020">20</a> of file <a class="el" href="Encoder_8php_source.html">Encoder.php</a>.</p>

</div>
</div>
<a class="anchor" id="a7b50502a5abcacf711adb0f3b6bbcfb2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static HTMLPurifier_Encoder::testEncodingSupportsASCII </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$encoding</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$bypass</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This expensive function tests whether or not a given character encoding supports ASCII. 7/8-bit encodings like Shift_JIS will fail this test, and require special processing. Variable width encodings shouldn't ever fail.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$encoding</td><td>Encoding name to test, as per iconv format </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$bypass</td><td>Whether or not to bypass the precompiled arrays. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Array of UTF-8 characters to their corresponding ASCII, which can be used to "undo" any overzealous iconv action. </dd></dl>

<p>Definition at line <a class="el" href="Encoder_8php_source.html#l00498">498</a> of file <a class="el" href="Encoder_8php_source.html">Encoder.php</a>.</p>

</div>
</div>
<a class="anchor" id="ad491b38d38ff9d9cdb6ea7d67a841de2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static HTMLPurifier_Encoder::testIconvTruncateBug </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>glibc iconv has a known bug where it doesn't handle the magic //IGNORE stanza correctly. In particular, rather than ignore characters, it will return an EILSEQ after consuming some number of characters, and expect you to restart iconv as if it were an E2BIG. Old versions of PHP did not respect the errno, and returned the fragment, so as a result you would see iconv mysteriously truncating output. We can work around this by manually chopping our input into segments of about 8000 characters, as long as PHP ignores the error code. If PHP starts paying attention to the error code, iconv becomes unusable.</p>
<dl class="section return"><dt>Returns</dt><dd>Error code indicating severity of bug. </dd></dl>

<p>Definition at line <a class="el" href="Encoder_8php_source.html#l00469">469</a> of file <a class="el" href="Encoder_8php_source.html">Encoder.php</a>.</p>

</div>
</div>
<a class="anchor" id="a1ce3abe9bf916a9ec35014f23255a408"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static HTMLPurifier_Encoder::unichr </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$code</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Translates a Unicode codepoint into its corresponding UTF-8 character. </p><dl class="section note"><dt>Note</dt><dd>Based on Feyd's function at <a href="http://forums.devnetwork.net/viewtopic.php?p=191404#191404">http://forums.devnetwork.net/viewtopic.php?p=191404#191404</a>, which is in public domain. </dd>
<dd>
While we're going to do code point parsing anyway, a good optimization would be to refuse to translate code points that are non-SGML characters. However, this could lead to duplication. </dd>
<dd>
This is very similar to the unichr function in maintenance/generate-entity-file.php (although this is superior, due to its sanity checks). </dd></dl>

<p>Definition at line <a class="el" href="Encoder_8php_source.html#l00288">288</a> of file <a class="el" href="Encoder_8php_source.html">Encoder.php</a>.</p>

</div>
</div>
<a class="anchor" id="ae177bdf5de75fd487d55fa87568366c8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static HTMLPurifier_Encoder::unsafeIconv </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$text</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>iconv wrapper which mutes errors, but doesn't work around bugs. </p>

<p>Definition at line <a class="el" href="Encoder_8php_source.html#l00025">25</a> of file <a class="el" href="Encoder_8php_source.html">Encoder.php</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="abee6de7ca542a201ad9bd1ff762d4b6d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const HTMLPurifier_Encoder::ICONV_OK = 0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>No bugs detected in iconv. </p>

<p>Definition at line <a class="el" href="Encoder_8php_source.html#l00445">445</a> of file <a class="el" href="Encoder_8php_source.html">Encoder.php</a>.</p>

</div>
</div>
<a class="anchor" id="a275b2fb955a479eff7f6a4cdd49fdaf4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const HTMLPurifier_Encoder::ICONV_TRUNCATES = 1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Iconv truncates output if converting from UTF-8 to another character set with //IGNORE, and a non-encodable character is found </p>

<p>Definition at line <a class="el" href="Encoder_8php_source.html#l00449">449</a> of file <a class="el" href="Encoder_8php_source.html">Encoder.php</a>.</p>

</div>
</div>
<a class="anchor" id="abba31caaa72f5cd8639d96326af31e4d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const HTMLPurifier_Encoder::ICONV_UNUSABLE = 2</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Iconv does not support //IGNORE, making it unusable for transcoding purposes </p>

<p>Definition at line <a class="el" href="Encoder_8php_source.html#l00453">453</a> of file <a class="el" href="Encoder_8php_source.html">Encoder.php</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>classes/security/htmlpurifier/library/HTMLPurifier/<a class="el" href="Encoder_8php_source.html">Encoder.php</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed May 28 2014 14:14:33 for XpressEngine Core by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.7
</small></address>
</body>
</html>

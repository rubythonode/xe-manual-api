\hypertarget{classHTMLPurifier__Lexer}{\section{H\+T\+M\+L\+Purifier\+\_\+\+Lexer Class Reference}
\label{classHTMLPurifier__Lexer}\index{H\+T\+M\+L\+Purifier\+\_\+\+Lexer@{H\+T\+M\+L\+Purifier\+\_\+\+Lexer}}
}
Inheritance diagram for H\+T\+M\+L\+Purifier\+\_\+\+Lexer\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{classHTMLPurifier__Lexer}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classHTMLPurifier__Lexer_a3a8cb5fd90a0e9cc65a9d24958884f51}{\+\_\+\+\_\+construct} ()
\item 
\hyperlink{classHTMLPurifier__Lexer_a4444f380da614edc88e8d6069f5c5b97}{parse\+Data} (\$string)
\item 
\hyperlink{classHTMLPurifier__Lexer_a207733a9dbacd22b2dfce50493122755}{tokenize\+H\+T\+M\+L} (\$string, \$config, \$context)
\item 
\hyperlink{classHTMLPurifier__Lexer_a01c2ce000fe0856a77532d749c3c7160}{normalize} (\$html, \$config, \$context)
\item 
\hyperlink{classHTMLPurifier__Lexer_abdcd2d9949060713eb7b02d65803dfce}{extract\+Body} (\$html)
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classHTMLPurifier__Lexer_ac7f8fe627b8b6a4d0e08dcf893c15a9f}{create} (\$config)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classHTMLPurifier__Lexer_acd246fb6f67bd3043b18553b04db93ed}{\$tracks\+Line\+Numbers} = false
\end{DoxyCompactItemize}
\subsection*{Static Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classHTMLPurifier__Lexer_a592d0852a8e007908b248dcd4647826d}{escape\+C\+D\+A\+T\+A} (\$string)
\item 
static \hyperlink{classHTMLPurifier__Lexer_ac79e709cfa5ece6d764bff90141005ee}{escape\+Commented\+C\+D\+A\+T\+A} (\$string)
\item 
static \hyperlink{classHTMLPurifier__Lexer_a8dfb1f0b3f5a080b48ad72b997dda049}{remove\+I\+E\+Conditional} (\$string)
\item 
static \hyperlink{classHTMLPurifier__Lexer_a58d8d2b2a37685a8855268ad4dec0c03}{C\+D\+A\+T\+A\+Callback} (\$matches)
\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classHTMLPurifier__Lexer_af2dcc2daaa4671f1a4edefa53b0d022d}{\$\+\_\+special\+\_\+entity2str}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Forgivingly lexes H\+T\+M\+L (S\+G\+M\+L-\/style) markup into tokens.

A lexer parses a string of S\+G\+M\+L-\/style markup and converts them into corresponding tokens. It doesn't check for well-\/formedness, although its internal mechanism may make this automatic (such as the case of \hyperlink{classHTMLPurifier__Lexer__DOMLex}{H\+T\+M\+L\+Purifier\+\_\+\+Lexer\+\_\+\+D\+O\+M\+Lex}). There are several implementations to choose from.

A lexer is H\+T\+M\+L-\/oriented\+: it might work with X\+M\+L, but it's not recommended, as we adhere to a subset of the specification for optimization reasons. This might change in the future. Also, most tokenizers are not expected to handle D\+T\+Ds or P\+Is.

This class should not be directly instantiated, but you may use \hyperlink{classHTMLPurifier__Lexer_ac7f8fe627b8b6a4d0e08dcf893c15a9f}{create()} to retrieve a default copy of the lexer. Being a supertype, this class does not actually define any implementation, but offers commonly used convenience functions for subclasses.

\begin{DoxyNote}{Note}
The unit tests will instantiate this class for testing purposes, as many of the utility functions require a class to be instantiated. This means that, even though this class is not runnable, it will not be declared abstract.
\end{DoxyNote}
\begin{DoxyParagraph}{}

\end{DoxyParagraph}
\begin{DoxyNote}{Note}
We use tokens rather than create a D\+O\+M representation because D\+O\+M would\+:
\end{DoxyNote}
\begin{DoxyParagraph}{}

\begin{DoxyEnumerate}
\item Require more processing and memory to create,
\item Is not streamable, and
\item Has the entire document structure (html and body not needed).
\end{DoxyEnumerate}
\end{DoxyParagraph}
\begin{DoxyParagraph}{}
However, D\+O\+M is helpful in that it makes it easy to move around nodes without a lot of lookaheads to see when a tag is closed. This is a limitation of the token system and some workarounds would be nice. 
\end{DoxyParagraph}


Definition at line 42 of file Lexer.\+php.



\subsection{Constructor \& Destructor Documentation}
\hypertarget{classHTMLPurifier__Lexer_a3a8cb5fd90a0e9cc65a9d24958884f51}{\index{H\+T\+M\+L\+Purifier\+\_\+\+Lexer@{H\+T\+M\+L\+Purifier\+\_\+\+Lexer}!\+\_\+\+\_\+construct@{\+\_\+\+\_\+construct}}
\index{\+\_\+\+\_\+construct@{\+\_\+\+\_\+construct}!H\+T\+M\+L\+Purifier\+\_\+\+Lexer@{H\+T\+M\+L\+Purifier\+\_\+\+Lexer}}
\subsubsection[{\+\_\+\+\_\+construct}]{\setlength{\rightskip}{0pt plus 5cm}H\+T\+M\+L\+Purifier\+\_\+\+Lexer\+::\+\_\+\+\_\+construct (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classHTMLPurifier__Lexer_a3a8cb5fd90a0e9cc65a9d24958884f51}


Definition at line 142 of file Lexer.\+php.



\subsection{Member Function Documentation}
\hypertarget{classHTMLPurifier__Lexer_a58d8d2b2a37685a8855268ad4dec0c03}{\index{H\+T\+M\+L\+Purifier\+\_\+\+Lexer@{H\+T\+M\+L\+Purifier\+\_\+\+Lexer}!C\+D\+A\+T\+A\+Callback@{C\+D\+A\+T\+A\+Callback}}
\index{C\+D\+A\+T\+A\+Callback@{C\+D\+A\+T\+A\+Callback}!H\+T\+M\+L\+Purifier\+\_\+\+Lexer@{H\+T\+M\+L\+Purifier\+\_\+\+Lexer}}
\subsubsection[{C\+D\+A\+T\+A\+Callback}]{\setlength{\rightskip}{0pt plus 5cm}static H\+T\+M\+L\+Purifier\+\_\+\+Lexer\+::\+C\+D\+A\+T\+A\+Callback (
\begin{DoxyParamCaption}
\item[{}]{\$matches}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [protected]}}}\label{classHTMLPurifier__Lexer_a58d8d2b2a37685a8855268ad4dec0c03}
Callback function for \hyperlink{classHTMLPurifier__Lexer_a592d0852a8e007908b248dcd4647826d}{escape\+C\+D\+A\+T\+A()} that does the work.

\begin{DoxyWarning}{Warning}
Though this is public in order to let the callback happen, calling it directly is not recommended.  \$matches P\+C\+R\+E matches array, with index 0 the entire match and 1 the inside of the C\+D\+A\+T\+A section. 
\end{DoxyWarning}
\begin{DoxyReturn}{Returns}
Escaped internals of the C\+D\+A\+T\+A section. 
\end{DoxyReturn}


Definition at line 253 of file Lexer.\+php.

\hypertarget{classHTMLPurifier__Lexer_ac7f8fe627b8b6a4d0e08dcf893c15a9f}{\index{H\+T\+M\+L\+Purifier\+\_\+\+Lexer@{H\+T\+M\+L\+Purifier\+\_\+\+Lexer}!create@{create}}
\index{create@{create}!H\+T\+M\+L\+Purifier\+\_\+\+Lexer@{H\+T\+M\+L\+Purifier\+\_\+\+Lexer}}
\subsubsection[{create}]{\setlength{\rightskip}{0pt plus 5cm}static H\+T\+M\+L\+Purifier\+\_\+\+Lexer\+::create (
\begin{DoxyParamCaption}
\item[{}]{\$config}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{classHTMLPurifier__Lexer_ac7f8fe627b8b6a4d0e08dcf893c15a9f}
Retrieves or sets the default Lexer as a Prototype Factory.

By default \hyperlink{classHTMLPurifier__Lexer__DOMLex}{H\+T\+M\+L\+Purifier\+\_\+\+Lexer\+\_\+\+D\+O\+M\+Lex} will be returned. There are a few exceptions involving special features that only Direct\+Lex implements.

\begin{DoxyNote}{Note}
The behavior of this class has changed, rather than accepting a prototype object, it now accepts a configuration object. To specify your own prototype, set Core.\+Lexer\+Impl to it. This change in behavior de-\/singletonizes the lexer object.
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em \$config} & Instance of \hyperlink{classHTMLPurifier__Config}{H\+T\+M\+L\+Purifier\+\_\+\+Config} \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Concrete lexer. 
\end{DoxyReturn}


Definition at line 68 of file Lexer.\+php.

\hypertarget{classHTMLPurifier__Lexer_a592d0852a8e007908b248dcd4647826d}{\index{H\+T\+M\+L\+Purifier\+\_\+\+Lexer@{H\+T\+M\+L\+Purifier\+\_\+\+Lexer}!escape\+C\+D\+A\+T\+A@{escape\+C\+D\+A\+T\+A}}
\index{escape\+C\+D\+A\+T\+A@{escape\+C\+D\+A\+T\+A}!H\+T\+M\+L\+Purifier\+\_\+\+Lexer@{H\+T\+M\+L\+Purifier\+\_\+\+Lexer}}
\subsubsection[{escape\+C\+D\+A\+T\+A}]{\setlength{\rightskip}{0pt plus 5cm}static H\+T\+M\+L\+Purifier\+\_\+\+Lexer\+::escape\+C\+D\+A\+T\+A (
\begin{DoxyParamCaption}
\item[{}]{\$string}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [protected]}}}\label{classHTMLPurifier__Lexer_a592d0852a8e007908b248dcd4647826d}
Translates C\+D\+A\+T\+A sections into regular sections (through escaping).


\begin{DoxyParams}{Parameters}
{\em \$string} & H\+T\+M\+L string to process. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
H\+T\+M\+L with C\+D\+A\+T\+A sections escaped. 
\end{DoxyReturn}


Definition at line 214 of file Lexer.\+php.

\hypertarget{classHTMLPurifier__Lexer_ac79e709cfa5ece6d764bff90141005ee}{\index{H\+T\+M\+L\+Purifier\+\_\+\+Lexer@{H\+T\+M\+L\+Purifier\+\_\+\+Lexer}!escape\+Commented\+C\+D\+A\+T\+A@{escape\+Commented\+C\+D\+A\+T\+A}}
\index{escape\+Commented\+C\+D\+A\+T\+A@{escape\+Commented\+C\+D\+A\+T\+A}!H\+T\+M\+L\+Purifier\+\_\+\+Lexer@{H\+T\+M\+L\+Purifier\+\_\+\+Lexer}}
\subsubsection[{escape\+Commented\+C\+D\+A\+T\+A}]{\setlength{\rightskip}{0pt plus 5cm}static H\+T\+M\+L\+Purifier\+\_\+\+Lexer\+::escape\+Commented\+C\+D\+A\+T\+A (
\begin{DoxyParamCaption}
\item[{}]{\$string}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [protected]}}}\label{classHTMLPurifier__Lexer_ac79e709cfa5ece6d764bff90141005ee}
Special C\+D\+A\+T\+A case that is especially convoluted for $<$script$>$ 

Definition at line 225 of file Lexer.\+php.

\hypertarget{classHTMLPurifier__Lexer_abdcd2d9949060713eb7b02d65803dfce}{\index{H\+T\+M\+L\+Purifier\+\_\+\+Lexer@{H\+T\+M\+L\+Purifier\+\_\+\+Lexer}!extract\+Body@{extract\+Body}}
\index{extract\+Body@{extract\+Body}!H\+T\+M\+L\+Purifier\+\_\+\+Lexer@{H\+T\+M\+L\+Purifier\+\_\+\+Lexer}}
\subsubsection[{extract\+Body}]{\setlength{\rightskip}{0pt plus 5cm}H\+T\+M\+L\+Purifier\+\_\+\+Lexer\+::extract\+Body (
\begin{DoxyParamCaption}
\item[{}]{\$html}
\end{DoxyParamCaption}
)}}\label{classHTMLPurifier__Lexer_abdcd2d9949060713eb7b02d65803dfce}
Takes a string of H\+T\+M\+L (fragment or document) and returns the content \begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000029}{Todo}]Consider making protected \end{DoxyRefDesc}


Definition at line 314 of file Lexer.\+php.

\hypertarget{classHTMLPurifier__Lexer_a01c2ce000fe0856a77532d749c3c7160}{\index{H\+T\+M\+L\+Purifier\+\_\+\+Lexer@{H\+T\+M\+L\+Purifier\+\_\+\+Lexer}!normalize@{normalize}}
\index{normalize@{normalize}!H\+T\+M\+L\+Purifier\+\_\+\+Lexer@{H\+T\+M\+L\+Purifier\+\_\+\+Lexer}}
\subsubsection[{normalize}]{\setlength{\rightskip}{0pt plus 5cm}H\+T\+M\+L\+Purifier\+\_\+\+Lexer\+::normalize (
\begin{DoxyParamCaption}
\item[{}]{\$html, }
\item[{}]{\$config, }
\item[{}]{\$context}
\end{DoxyParamCaption}
)}}\label{classHTMLPurifier__Lexer_a01c2ce000fe0856a77532d749c3c7160}
Takes a piece of H\+T\+M\+L and normalizes it by converting entities, fixing encoding, extracting bits, and other good stuff. \begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000028}{Todo}]Consider making protected \end{DoxyRefDesc}


Definition at line 263 of file Lexer.\+php.

\hypertarget{classHTMLPurifier__Lexer_a4444f380da614edc88e8d6069f5c5b97}{\index{H\+T\+M\+L\+Purifier\+\_\+\+Lexer@{H\+T\+M\+L\+Purifier\+\_\+\+Lexer}!parse\+Data@{parse\+Data}}
\index{parse\+Data@{parse\+Data}!H\+T\+M\+L\+Purifier\+\_\+\+Lexer@{H\+T\+M\+L\+Purifier\+\_\+\+Lexer}}
\subsubsection[{parse\+Data}]{\setlength{\rightskip}{0pt plus 5cm}H\+T\+M\+L\+Purifier\+\_\+\+Lexer\+::parse\+Data (
\begin{DoxyParamCaption}
\item[{}]{\$string}
\end{DoxyParamCaption}
)}}\label{classHTMLPurifier__Lexer_a4444f380da614edc88e8d6069f5c5b97}
Parses special entities into the proper characters.

This string will translate escaped versions of the special characters into the correct ones.

\begin{DoxyWarning}{Warning}
You should be able to treat the output of this function as completely parsed, but that's only because all other entities should have been handled previously in substitute\+Non\+Special\+Entities()
\end{DoxyWarning}

\begin{DoxyParams}{Parameters}
{\em \$string} & String character data to be parsed. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Parsed character data. 
\end{DoxyReturn}


Definition at line 174 of file Lexer.\+php.

\hypertarget{classHTMLPurifier__Lexer_a8dfb1f0b3f5a080b48ad72b997dda049}{\index{H\+T\+M\+L\+Purifier\+\_\+\+Lexer@{H\+T\+M\+L\+Purifier\+\_\+\+Lexer}!remove\+I\+E\+Conditional@{remove\+I\+E\+Conditional}}
\index{remove\+I\+E\+Conditional@{remove\+I\+E\+Conditional}!H\+T\+M\+L\+Purifier\+\_\+\+Lexer@{H\+T\+M\+L\+Purifier\+\_\+\+Lexer}}
\subsubsection[{remove\+I\+E\+Conditional}]{\setlength{\rightskip}{0pt plus 5cm}static H\+T\+M\+L\+Purifier\+\_\+\+Lexer\+::remove\+I\+E\+Conditional (
\begin{DoxyParamCaption}
\item[{}]{\$string}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [protected]}}}\label{classHTMLPurifier__Lexer_a8dfb1f0b3f5a080b48ad72b997dda049}
Special Internet Explorer conditional comments should be removed. 

Definition at line 236 of file Lexer.\+php.

\hypertarget{classHTMLPurifier__Lexer_a207733a9dbacd22b2dfce50493122755}{\index{H\+T\+M\+L\+Purifier\+\_\+\+Lexer@{H\+T\+M\+L\+Purifier\+\_\+\+Lexer}!tokenize\+H\+T\+M\+L@{tokenize\+H\+T\+M\+L}}
\index{tokenize\+H\+T\+M\+L@{tokenize\+H\+T\+M\+L}!H\+T\+M\+L\+Purifier\+\_\+\+Lexer@{H\+T\+M\+L\+Purifier\+\_\+\+Lexer}}
\subsubsection[{tokenize\+H\+T\+M\+L}]{\setlength{\rightskip}{0pt plus 5cm}H\+T\+M\+L\+Purifier\+\_\+\+Lexer\+::tokenize\+H\+T\+M\+L (
\begin{DoxyParamCaption}
\item[{}]{\$string, }
\item[{}]{\$config, }
\item[{}]{\$context}
\end{DoxyParamCaption}
)}}\label{classHTMLPurifier__Lexer_a207733a9dbacd22b2dfce50493122755}
Lexes an H\+T\+M\+L string into tokens.


\begin{DoxyParams}{Parameters}
{\em \$string} & String H\+T\+M\+L. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\hyperlink{classHTMLPurifier__Token}{H\+T\+M\+L\+Purifier\+\_\+\+Token} array representation of H\+T\+M\+L. 
\end{DoxyReturn}


Definition at line 204 of file Lexer.\+php.



\subsection{Member Data Documentation}
\hypertarget{classHTMLPurifier__Lexer_af2dcc2daaa4671f1a4edefa53b0d022d}{\index{H\+T\+M\+L\+Purifier\+\_\+\+Lexer@{H\+T\+M\+L\+Purifier\+\_\+\+Lexer}!\$\+\_\+special\+\_\+entity2str@{\$\+\_\+special\+\_\+entity2str}}
\index{\$\+\_\+special\+\_\+entity2str@{\$\+\_\+special\+\_\+entity2str}!H\+T\+M\+L\+Purifier\+\_\+\+Lexer@{H\+T\+M\+L\+Purifier\+\_\+\+Lexer}}
\subsubsection[{\$\+\_\+special\+\_\+entity2str}]{\setlength{\rightskip}{0pt plus 5cm}H\+T\+M\+L\+Purifier\+\_\+\+Lexer\+::\$\+\_\+special\+\_\+entity2str\hspace{0.3cm}{\ttfamily [protected]}}}\label{classHTMLPurifier__Lexer_af2dcc2daaa4671f1a4edefa53b0d022d}
{\bfseries Initial value\+:}
\begin{DoxyCode}
=
            array(
                    \textcolor{stringliteral}{'&quot;'} => \textcolor{charliteral}{'"'},
                    \textcolor{stringliteral}{'&amp;'}  => \textcolor{charliteral}{'&'},
                    \textcolor{stringliteral}{'&lt;'}   => \textcolor{charliteral}{'<'},
                    \textcolor{stringliteral}{'&gt;'}   => \textcolor{charliteral}{'>'},
                    \textcolor{stringliteral}{'&#39;'}  => \textcolor{stringliteral}{"'"},
                    \textcolor{stringliteral}{'&#039;'} => \textcolor{stringliteral}{"'"},
                    \textcolor{stringliteral}{'&#x27;'} => \textcolor{stringliteral}{"'"}
            )
\end{DoxyCode}
Most common entity to raw value conversion table for special entities. 

Definition at line 149 of file Lexer.\+php.

\hypertarget{classHTMLPurifier__Lexer_acd246fb6f67bd3043b18553b04db93ed}{\index{H\+T\+M\+L\+Purifier\+\_\+\+Lexer@{H\+T\+M\+L\+Purifier\+\_\+\+Lexer}!\$tracks\+Line\+Numbers@{\$tracks\+Line\+Numbers}}
\index{\$tracks\+Line\+Numbers@{\$tracks\+Line\+Numbers}!H\+T\+M\+L\+Purifier\+\_\+\+Lexer@{H\+T\+M\+L\+Purifier\+\_\+\+Lexer}}
\subsubsection[{\$tracks\+Line\+Numbers}]{\setlength{\rightskip}{0pt plus 5cm}H\+T\+M\+L\+Purifier\+\_\+\+Lexer\+::\$tracks\+Line\+Numbers = false}}\label{classHTMLPurifier__Lexer_acd246fb6f67bd3043b18553b04db93ed}
Whether or not this lexer implements line-\/number/column-\/number tracking. If it does, set to true. 

Definition at line 49 of file Lexer.\+php.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
classes/security/htmlpurifier/library/\+H\+T\+M\+L\+Purifier/\hyperlink{Lexer_8php}{Lexer.\+php}\end{DoxyCompactItemize}

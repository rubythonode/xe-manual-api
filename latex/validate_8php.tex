\hypertarget{validate_8php}{\section{tools/dbxml\+\_\+validator/validate.php File Reference}
\label{validate_8php}\index{tools/dbxml\+\_\+validator/validate.\+php@{tools/dbxml\+\_\+validator/validate.\+php}}
}
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{classErrorMessage}{Error\+Message}
\begin{DoxyCompactList}\small\item\em Exception class for user error messages. \end{DoxyCompactList}\item 
class \hyperlink{classSyntaxError}{Syntax\+Error}
\begin{DoxyCompactList}\small\item\em Error message class to signal and carry the command-\/line usage description (string) for the script. \end{DoxyCompactList}\item 
class \hyperlink{classXmlSchemaError}{Xml\+Schema\+Error}
\begin{DoxyCompactList}\small\item\em Error in an X\+M\+L query  Arnia Software. \end{DoxyCompactList}\item 
class \hyperlink{classLibXmlClearErrors}{Lib\+Xml\+Clear\+Errors}
\begin{DoxyCompactList}\small\item\em Clean up libxml errors list when going out of scope (on the destructor)  Arnia Software. \end{DoxyCompactList}\item 
class \hyperlink{classReturnCode}{Return\+Code}
\item 
class \hyperlink{classUnlinkFile}{Unlink\+File}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{validate_8php_a57d34da3bd80860dfd34620af3c5d246}{exception\+\_\+error\+\_\+handler} (\$errno, \$errstr, \$errfile, \$errline)
\begin{DoxyCompactList}\small\item\em callback to turn a php error into a php exception So now any error interrupts or terminates script execution  Arnia Software \end{DoxyCompactList}\item 
\hyperlink{validate_8php_a314f82b963781ec88823449af5e5134e}{lib\+Xml\+Display\+Error} (\$filename=N\+U\+L\+L, \$throw\+\_\+error=F\+A\+L\+S\+E)
\item 
\hyperlink{validate_8php_afff9c2dd725f410e53f22d5d52c1d18a}{check\+Duplicate\+Descendants} (\$xml\+\_\+file, \$node, \$child\+\_\+tag)
\item 
\hyperlink{validate_8php_a9984e628f1ac1735fbfbacc979b90a37}{check\+Unique\+Key} (\$xml\+\_\+file, \$node, \$child\+\_\+tags, \$attr\+\_\+tags, \$key)
\item 
\hyperlink{validate_8php_abe3fd084273604eb5167f76dab958648}{check\+Table\+Expression} (\$xml\+\_\+file, \$table\+\_\+element)
\item 
\hyperlink{validate_8php_a80f024b0929c10c930a2ea9ca57e6a59}{check\+Tables\+Clause} (\$xml\+\_\+file, \$tables\+\_\+element)
\item 
\hyperlink{validate_8php_a43a94e89907bd4a11d8382f417a79dce}{check\+Select\+List\+Clause} (\$xml\+\_\+file, \$columns\+\_\+element)
\item 
\hyperlink{validate_8php_a0f66aa189f4ff5dc01d93d6735e23ebf}{check\+Var\+Contents\+Validation} (\$xml\+\_\+file, \$container\+\_\+element, \$child\+\_\+tag)
\item 
\hyperlink{validate_8php_a7e99004432e9b496acb353a10401ce23}{check\+Condition\+Element} (\$xml\+\_\+file, \$condition)
\item 
\hyperlink{validate_8php_ac3e33bd5237a5ef47bbedbf962724156}{check\+Conditions\+Group} (\$xml\+\_\+file, \$conditions)
\item 
\hyperlink{validate_8php_a1a7b7327a3c5365b6ccf7828ca909a6f}{check\+Navigation\+Clauses} (\$xml\+\_\+file, \$navigation\+\_\+element)
\item 
\hyperlink{validate_8php_acc6fcea31bae0e5c66af9431bbe89ed3}{validate\+\_\+select\+\_\+query} (\$xml\+\_\+file, \$query\+\_\+element)
\item 
\hyperlink{validate_8php_af9c61a8b17e64da32042acf1f10a749e}{validate\+\_\+update\+\_\+query} (\$xml\+\_\+file, \$query\+\_\+element)
\item 
\hyperlink{validate_8php_a6cb78680a29c3df75fc0a7e083fb5b41}{validate\+\_\+delete\+\_\+query} (\$xml\+\_\+file, \$query\+\_\+element)
\item 
\hyperlink{validate_8php_ae38b9dcf816905b7fd3c4aeeeb4bfb27}{validate\+\_\+insert\+\_\+select\+\_\+query} (\$xml\+\_\+file, \$query\+\_\+element)
\item 
\hyperlink{validate_8php_a208d0609e6ad89408ad82c71b30e8611}{validate\+\_\+xml\+\_\+query} (\$xml\+\_\+file, \$query\+\_\+element)
\item 
\hyperlink{point__level__icon_8addon_8php_a29031816e50a8f742422e671b2bef9b2}{if}(strpos(P\+H\+P\+\_\+\+S\+A\+P\+I, 'cli')!==F\+A\+L\+S\+E$\vert$$\vert$strpos(P\+H\+P\+\_\+\+S\+A\+P\+I, \\*
'cgi')!==F\+A\+L\+S\+E) \hyperlink{validate_8php_a32e0113d5079fdbd81dc9d69ff2c5ee6}{validate\+\_\+query\+\_\+id} (\$xml\+\_\+file, \$query\+\_\+id)
\item 
\hyperlink{validate_8php_ae55c7ee778b9cb10a5bf33a3047c5586}{validate\+\_\+schema\+\_\+doc} (\$xml\+\_\+file, \$table\+\_\+element)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hyperlink{validate_8php_a4dedc743cbf229659efcb0ad9f6c6cab}{\$validate\+\_\+query\+\_\+type}
\item 
\hyperlink{validate_8php_abe4cc9788f52e49485473dc699537388}{try}
\item 
const \hyperlink{validate_8php_a0b8cd04242aae1a86ebfb94e357edf41}{C\+M\+D\+\_\+\+N\+A\+M\+E} basename(\$argv\mbox{[}0\mbox{]})
\item 
\hyperlink{validate_8php_a45b77e89b244f7f9d70aac2006151525}{\$cmdname} = \hyperlink{validate_8php_a0b8cd04242aae1a86ebfb94e357edf41}{C\+M\+D\+\_\+\+N\+A\+M\+E}
\item 
\hyperlink{point__level__icon_8addon_8php_a29031816e50a8f742422e671b2bef9b2}{if}(!defined('S\+T\+D\+E\+R\+R')) \hyperlink{point__level__icon_8addon_8php_a29031816e50a8f742422e671b2bef9b2}{if}(!defined('\+\_\+\+\_\+\+D\+I\+R\+\_\+\+\_\+')) \hyperlink{validate_8php_a87d4dc54461ff155cd633f2ece7cd9e4}{\$retcode} = new \hyperlink{classReturnCode}{Return\+Code}(\hyperlink{classReturnCode_a1bfbc40c7a81cff70d885541bde528bd}{Return\+Code\+::\+R\+E\+T\+C\+O\+D\+E\+\_\+\+S\+U\+C\+C\+E\+S\+S})
\item 
\hyperlink{validate_8php_aeb18ba5c86f2000ce5dd010acff58413}{\$auto\+\_\+schema} = N\+U\+L\+L
\item 
\hyperlink{validate_8php_a8da6d5929566e961bc11f25104519c1a}{\$schema\+\_\+language} = N\+U\+L\+L
\item 
\hyperlink{validate_8php_a33587a1c0ee8a26e80e32ffac472df40}{\$skip\+\_\+query\+\_\+id} = N\+U\+L\+L
\item 
\hyperlink{validate_8php_aa5ad575ad128f7157c6336775537072e}{\$xe\+\_\+path} = N\+U\+L\+L
\item 
\hyperlink{validate_8php_a0e24775f133afa5748f8510c4a76f993}{\$validate\+\_\+only} = N\+U\+L\+L
\item 
\hyperlink{validate_8php_a7a7edb3be73e5594d8856ac68aecd5ca}{\$query\+\_\+args} = N\+U\+L\+L
\item 
\hyperlink{validate_8php_a809bf1b50077e0d0a61a22a9c29e45f2}{\$query\+\_\+args\+\_\+file} = N\+U\+L\+L
\item 
while(\$argc $>$=2 \&\&\$argv\mbox{[}1\mbox{]}\mbox{[}0\mbox{]}== \\*
'-\/') \hyperlink{point__level__icon_8addon_8php_a29031816e50a8f742422e671b2bef9b2}{if}(\$argc$<$ 2$\vert$$\vert$(\$argc==2 \\*
\&\&in\+\_\+array(\$argv\mbox{[}1\mbox{]}, array('-\/-\/help', \\*
'-\/-\/usage', '/?', '-\/?', '-\/h')))) \hyperlink{validate_8php_a71edb70aa44d79c211ac52816d93b852}{\$query\+\_\+user\+\_\+args} = array()
\item 
\hyperlink{validate_8php_a72d6f00099d1020a9938b75d78d31db3}{\$schema\+\_\+file} = N\+U\+L\+L
\item 
\hyperlink{validate_8php_afdc62b6a8a4984ca9a53a1431233ed9a}{\$schemas\+\_\+set}
\item 
\hyperlink{validate_8php_ab7d4a5db53db0f967ab81c779a5b0ccb}{\$table\+\_\+schema} = \+\_\+\+\_\+\+D\+I\+R\+\_\+\+\_\+ . '/xml\+\_\+create\+\_\+table.\+xsd'
\item 
\hyperlink{validate_8php_a95b15eb9cb20bddf2214b8996fad3158}{\$dom\+Document} = new D\+O\+M\+Document()
\item 
\hyperlink{validate_8php_a83018d9153d17d91fbcf3bc10158d34f}{\$i} = 1
\end{DoxyCompactItemize}


\subsection{Detailed Description}
vi\+:set ts=4\+:

Script to validate a query or a S\+Q\+L statement written in the Xpress\+Engine X\+M\+L \hyperlink{classQuery}{Query} Language or the X\+M\+L Schema language.

Xpress\+Engine is an open source framework for creating your web sites. \href{http://xpressengine.org/}{\tt http\+://xpressengine.\+org/}

\+: Arnia Software \+: 9 apr 2012

The validation is based on, and is meant to model, the behavior exposed by the php classes in classes/xml/xmlquery/ and class/db/queryparts/ in the X\+E installation directory.

Usage\+: \hyperlink{validate_8php}{validate.\+php} query-\/file.\+xml query-\/file.\+xml ... or \hyperlink{validate_8php}{validate.\+php} schema-\/definition.\+xsd query-\/file.\+xml ... 

Definition in file \hyperlink{validate_8php_source}{validate.\+php}.



\subsection{Function Documentation}
\hypertarget{validate_8php_a7e99004432e9b496acb353a10401ce23}{\index{validate.\+php@{validate.\+php}!check\+Condition\+Element@{check\+Condition\+Element}}
\index{check\+Condition\+Element@{check\+Condition\+Element}!validate.\+php@{validate.\+php}}
\subsubsection[{check\+Condition\+Element}]{\setlength{\rightskip}{0pt plus 5cm}check\+Condition\+Element (
\begin{DoxyParamCaption}
\item[{}]{\$xml\+\_\+file, }
\item[{}]{\$condition}
\end{DoxyParamCaption}
)}}\label{validate_8php_a7e99004432e9b496acb353a10401ce23}




Checks that a subquery condition does not have a var or default attribute.

\begin{DoxyReturn}{Returns}

\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em \$xml\+\_\+file} & \\
\hline
{\em \$condition} & \\
\hline
\end{DoxyParams}


Definition at line 548 of file validate.\+php.

\hypertarget{validate_8php_ac3e33bd5237a5ef47bbedbf962724156}{\index{validate.\+php@{validate.\+php}!check\+Conditions\+Group@{check\+Conditions\+Group}}
\index{check\+Conditions\+Group@{check\+Conditions\+Group}!validate.\+php@{validate.\+php}}
\subsubsection[{check\+Conditions\+Group}]{\setlength{\rightskip}{0pt plus 5cm}check\+Conditions\+Group (
\begin{DoxyParamCaption}
\item[{}]{\$xml\+\_\+file, }
\item[{}]{\$conditions}
\end{DoxyParamCaption}
)}}\label{validate_8php_ac3e33bd5237a5ef47bbedbf962724156}




Checks that conditions have the pipe attribute, and that variable-\/contents-\/validation attributes are only present if var attribute is present.

Also recurses into condition groups and expression subqueries \begin{DoxyReturn}{Returns}

\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em \$xml\+\_\+file} & \\
\hline
{\em \$conditions} & \\
\hline
\end{DoxyParams}


Definition at line 600 of file validate.\+php.

\hypertarget{validate_8php_afff9c2dd725f410e53f22d5d52c1d18a}{\index{validate.\+php@{validate.\+php}!check\+Duplicate\+Descendants@{check\+Duplicate\+Descendants}}
\index{check\+Duplicate\+Descendants@{check\+Duplicate\+Descendants}!validate.\+php@{validate.\+php}}
\subsubsection[{check\+Duplicate\+Descendants}]{\setlength{\rightskip}{0pt plus 5cm}check\+Duplicate\+Descendants (
\begin{DoxyParamCaption}
\item[{}]{\$xml\+\_\+file, }
\item[{}]{\$node, }
\item[{}]{\$child\+\_\+tag}
\end{DoxyParamCaption}
)}}\label{validate_8php_afff9c2dd725f410e53f22d5d52c1d18a}




Checks an X\+M\+L node for duplicate descendants of a give tag. Throws \hyperlink{classXmlSchemaError}{Xml\+Schema\+Error} if duplicates found. \begin{DoxyReturn}{Returns}

\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em \$xml\+\_\+file} & \\
\hline
{\em \$node} & \\
\hline
{\em \$child\+\_\+tag} & \\
\hline
\end{DoxyParams}


Definition at line 178 of file validate.\+php.

\hypertarget{validate_8php_a1a7b7327a3c5365b6ccf7828ca909a6f}{\index{validate.\+php@{validate.\+php}!check\+Navigation\+Clauses@{check\+Navigation\+Clauses}}
\index{check\+Navigation\+Clauses@{check\+Navigation\+Clauses}!validate.\+php@{validate.\+php}}
\subsubsection[{check\+Navigation\+Clauses}]{\setlength{\rightskip}{0pt plus 5cm}check\+Navigation\+Clauses (
\begin{DoxyParamCaption}
\item[{}]{\$xml\+\_\+file, }
\item[{}]{\$navigation\+\_\+element}
\end{DoxyParamCaption}
)}}\label{validate_8php_a1a7b7327a3c5365b6ccf7828ca909a6f}




Ensure at most one $<$list\+\_\+count$>$, $<$page\+\_\+count$>$ and $<$page$>$ elements are present. There can be any number of $<$index$>$ elements listed.

\begin{DoxyReturn}{Returns}

\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em \$xml\+\_\+file} & \\
\hline
{\em \$navigation\+\_\+element} & \\
\hline
\end{DoxyParams}


Definition at line 665 of file validate.\+php.

\hypertarget{validate_8php_a43a94e89907bd4a11d8382f417a79dce}{\index{validate.\+php@{validate.\+php}!check\+Select\+List\+Clause@{check\+Select\+List\+Clause}}
\index{check\+Select\+List\+Clause@{check\+Select\+List\+Clause}!validate.\+php@{validate.\+php}}
\subsubsection[{check\+Select\+List\+Clause}]{\setlength{\rightskip}{0pt plus 5cm}check\+Select\+List\+Clause (
\begin{DoxyParamCaption}
\item[{}]{\$xml\+\_\+file, }
\item[{}]{\$columns\+\_\+element}
\end{DoxyParamCaption}
)}}\label{validate_8php_a43a94e89907bd4a11d8382f417a79dce}




\hyperlink{classTable}{Table} columns in a select-\/list should be unique. This is not a requirement by the S\+Q\+L language, and it can be commented out below, but it is still common sense.

Some of the \char`\"{}columns\char`\"{} here are actually small expressions, but they can still be included literally in the unique constraint.

\begin{DoxyReturn}{Returns}

\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em \$xml\+\_\+file} & \\
\hline
{\em \$columns\+\_\+element} & \\
\hline
\end{DoxyParams}


Definition at line 471 of file validate.\+php.

\hypertarget{validate_8php_abe3fd084273604eb5167f76dab958648}{\index{validate.\+php@{validate.\+php}!check\+Table\+Expression@{check\+Table\+Expression}}
\index{check\+Table\+Expression@{check\+Table\+Expression}!validate.\+php@{validate.\+php}}
\subsubsection[{check\+Table\+Expression}]{\setlength{\rightskip}{0pt plus 5cm}check\+Table\+Expression (
\begin{DoxyParamCaption}
\item[{}]{\$xml\+\_\+file, }
\item[{}]{\$table\+\_\+element}
\end{DoxyParamCaption}
)}}\label{validate_8php_abe3fd084273604eb5167f76dab958648}




Checks a S\+Q\+L table-\/expression in the F\+R\+O\+M clause. The table should be either\+:
\begin{DoxyItemize}
\item a named table. If the table is the right table of a join, then the join conditions should be given as content.
\item a sub-\/query. No table name should be given, table alias should be present and query attribute should be present and have the value \char`\"{}true\char`\"{}. Content should include at least a select list or a table specification
\end{DoxyItemize}

\begin{DoxyReturn}{Returns}

\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em \$xml\+\_\+file} & \\
\hline
{\em \$table\+\_\+element} & \\
\hline
\end{DoxyParams}


Definition at line 280 of file validate.\+php.

\hypertarget{validate_8php_a80f024b0929c10c930a2ea9ca57e6a59}{\index{validate.\+php@{validate.\+php}!check\+Tables\+Clause@{check\+Tables\+Clause}}
\index{check\+Tables\+Clause@{check\+Tables\+Clause}!validate.\+php@{validate.\+php}}
\subsubsection[{check\+Tables\+Clause}]{\setlength{\rightskip}{0pt plus 5cm}check\+Tables\+Clause (
\begin{DoxyParamCaption}
\item[{}]{\$xml\+\_\+file, }
\item[{}]{\$tables\+\_\+element}
\end{DoxyParamCaption}
)}}\label{validate_8php_a80f024b0929c10c930a2ea9ca57e6a59}




All table names and aliases should be distinct throughout the $<$tables$>$ element.

\hyperlink{classSubquery}{Subquery} tables should be valid queries.

\begin{DoxyReturn}{Returns}

\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em \$xml\+\_\+file} & \\
\hline
{\em \$tables\+\_\+element} & \\
\hline
\end{DoxyParams}


Definition at line 430 of file validate.\+php.

\hypertarget{validate_8php_a9984e628f1ac1735fbfbacc979b90a37}{\index{validate.\+php@{validate.\+php}!check\+Unique\+Key@{check\+Unique\+Key}}
\index{check\+Unique\+Key@{check\+Unique\+Key}!validate.\+php@{validate.\+php}}
\subsubsection[{check\+Unique\+Key}]{\setlength{\rightskip}{0pt plus 5cm}check\+Unique\+Key (
\begin{DoxyParamCaption}
\item[{}]{\$xml\+\_\+file, }
\item[{}]{\$node, }
\item[{}]{\$child\+\_\+tags, }
\item[{}]{\$attr\+\_\+tags, }
\item[{}]{\$key}
\end{DoxyParamCaption}
)}}\label{validate_8php_a9984e628f1ac1735fbfbacc979b90a37}




Checks the X\+M\+L child nodes for unique/key values of one (or more) attribute(s)


\begin{DoxyParams}{Parameters}
{\em \$xml\+\_\+file} & Name of file with the X\+M\+L node to be checked. Used in the error messages. \\
\hline
{\em \$node} & The X\+M\+L node with the children to be checked. \\
\hline
{\em \$child\+\_\+tags} & Array with tag names for the children elements \\
\hline
{\em \$attr\+\_\+tags} & Array with names of attributes to be checked. If multiple attributes are given, than the first one that is present on a child is included in the check. \\
\hline
{\em \$key} & True if child elements are required to expose at least one of the attribute. False if only the child nodes with some of the attributes present are to be checked. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}

\end{DoxyReturn}


Definition at line 216 of file validate.\+php.

\hypertarget{validate_8php_a0f66aa189f4ff5dc01d93d6735e23ebf}{\index{validate.\+php@{validate.\+php}!check\+Var\+Contents\+Validation@{check\+Var\+Contents\+Validation}}
\index{check\+Var\+Contents\+Validation@{check\+Var\+Contents\+Validation}!validate.\+php@{validate.\+php}}
\subsubsection[{check\+Var\+Contents\+Validation}]{\setlength{\rightskip}{0pt plus 5cm}check\+Var\+Contents\+Validation (
\begin{DoxyParamCaption}
\item[{}]{\$xml\+\_\+file, }
\item[{}]{\$container\+\_\+element, }
\item[{}]{\$child\+\_\+tag}
\end{DoxyParamCaption}
)}}\label{validate_8php_a0f66aa189f4ff5dc01d93d6735e23ebf}




Check that attributes for variable contents validation (filter, notnull, minlength, maxlength) are present only if the var attribute is present. \begin{DoxyReturn}{Returns}

\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em \$xml\+\_\+file} & \\
\hline
{\em \$container\+\_\+element} & \\
\hline
{\em \$child\+\_\+tag} & \\
\hline
\end{DoxyParams}


Definition at line 495 of file validate.\+php.

\hypertarget{validate_8php_a57d34da3bd80860dfd34620af3c5d246}{\index{validate.\+php@{validate.\+php}!exception\+\_\+error\+\_\+handler@{exception\+\_\+error\+\_\+handler}}
\index{exception\+\_\+error\+\_\+handler@{exception\+\_\+error\+\_\+handler}!validate.\+php@{validate.\+php}}
\subsubsection[{exception\+\_\+error\+\_\+handler}]{\setlength{\rightskip}{0pt plus 5cm}exception\+\_\+error\+\_\+handler (
\begin{DoxyParamCaption}
\item[{}]{\$errno, }
\item[{}]{\$errstr, }
\item[{}]{\$errfile, }
\item[{}]{\$errline}
\end{DoxyParamCaption}
)}}\label{validate_8php_a57d34da3bd80860dfd34620af3c5d246}


callback to turn a php error into a php exception So now any error interrupts or terminates script execution  Arnia Software 


\begin{DoxyParams}{Parameters}
{\em \$errno} & -\/ php error number \\
\hline
{\em \$errstr} & -\/ php error string \\
\hline
{\em \$errfile} & -\/ file name \\
\hline
{\em \$errline} & -\/ line no \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
none 
\end{DoxyReturn}


Definition at line 40 of file validate.\+php.

\hypertarget{validate_8php_a314f82b963781ec88823449af5e5134e}{\index{validate.\+php@{validate.\+php}!lib\+Xml\+Display\+Error@{lib\+Xml\+Display\+Error}}
\index{lib\+Xml\+Display\+Error@{lib\+Xml\+Display\+Error}!validate.\+php@{validate.\+php}}
\subsubsection[{lib\+Xml\+Display\+Error}]{\setlength{\rightskip}{0pt plus 5cm}lib\+Xml\+Display\+Error (
\begin{DoxyParamCaption}
\item[{}]{\$filename = {\ttfamily NULL}, }
\item[{}]{\$throw\+\_\+error = {\ttfamily FALSE}}
\end{DoxyParamCaption}
)}}\label{validate_8php_a314f82b963781ec88823449af5e5134e}




\begin{DoxyReturn}{Returns}

\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em \$filename} & \\
\hline
{\em \$throw\+\_\+error} & \\
\hline
\end{DoxyParams}


Definition at line 129 of file validate.\+php.

\hypertarget{validate_8php_a6cb78680a29c3df75fc0a7e083fb5b41}{\index{validate.\+php@{validate.\+php}!validate\+\_\+delete\+\_\+query@{validate\+\_\+delete\+\_\+query}}
\index{validate\+\_\+delete\+\_\+query@{validate\+\_\+delete\+\_\+query}!validate.\+php@{validate.\+php}}
\subsubsection[{validate\+\_\+delete\+\_\+query}]{\setlength{\rightskip}{0pt plus 5cm}validate\+\_\+delete\+\_\+query (
\begin{DoxyParamCaption}
\item[{}]{\$xml\+\_\+file, }
\item[{}]{\$query\+\_\+element}
\end{DoxyParamCaption}
)}}\label{validate_8php_a6cb78680a29c3df75fc0a7e083fb5b41}





\begin{DoxyParams}{Parameters}
{\em \$xml\+\_\+file} & \\
\hline
{\em \$query\+\_\+element} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}

\end{DoxyReturn}


Definition at line 756 of file validate.\+php.

\hypertarget{validate_8php_ae38b9dcf816905b7fd3c4aeeeb4bfb27}{\index{validate.\+php@{validate.\+php}!validate\+\_\+insert\+\_\+select\+\_\+query@{validate\+\_\+insert\+\_\+select\+\_\+query}}
\index{validate\+\_\+insert\+\_\+select\+\_\+query@{validate\+\_\+insert\+\_\+select\+\_\+query}!validate.\+php@{validate.\+php}}
\subsubsection[{validate\+\_\+insert\+\_\+select\+\_\+query}]{\setlength{\rightskip}{0pt plus 5cm}validate\+\_\+insert\+\_\+select\+\_\+query (
\begin{DoxyParamCaption}
\item[{}]{\$xml\+\_\+file, }
\item[{}]{\$query\+\_\+element}
\end{DoxyParamCaption}
)}}\label{validate_8php_ae38b9dcf816905b7fd3c4aeeeb4bfb27}




\begin{DoxyReturn}{Returns}

\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em \$xml\+\_\+file} & \\
\hline
{\em \$query\+\_\+element} & \\
\hline
\end{DoxyParams}


Definition at line 779 of file validate.\+php.

\hypertarget{validate_8php_a32e0113d5079fdbd81dc9d69ff2c5ee6}{\index{validate.\+php@{validate.\+php}!validate\+\_\+query\+\_\+id@{validate\+\_\+query\+\_\+id}}
\index{validate\+\_\+query\+\_\+id@{validate\+\_\+query\+\_\+id}!validate.\+php@{validate.\+php}}
\subsubsection[{validate\+\_\+query\+\_\+id}]{\setlength{\rightskip}{0pt plus 5cm}{\bf if} (strpos(P\+H\+P\+\_\+\+S\+A\+P\+I, 'cli')!==F\+A\+L\+S\+E$\vert$$\vert$strpos(P\+H\+P\+\_\+\+S\+A\+P\+I, 'cgi')!==F\+A\+L\+S\+E) validate\+\_\+query\+\_\+id (
\begin{DoxyParamCaption}
\item[{}]{\$xml\+\_\+file, }
\item[{}]{\$query\+\_\+id}
\end{DoxyParamCaption}
)}}\label{validate_8php_a32e0113d5079fdbd81dc9d69ff2c5ee6}




Checks that the query\+\_\+id is the same as the given file name. For portability with case-\/sensitive file systems, the actual casing of the file name from the file system is used, and the subsequent string comparatin is case-\/sensitive.

Assumes the file is known to exist (has already been opened).

\begin{DoxyReturn}{Returns}

\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em \$xml\+\_\+file} & \\
\hline
{\em \$query\+\_\+id} & \\
\hline
\end{DoxyParams}


Definition at line 898 of file validate.\+php.

\hypertarget{validate_8php_ae55c7ee778b9cb10a5bf33a3047c5586}{\index{validate.\+php@{validate.\+php}!validate\+\_\+schema\+\_\+doc@{validate\+\_\+schema\+\_\+doc}}
\index{validate\+\_\+schema\+\_\+doc@{validate\+\_\+schema\+\_\+doc}!validate.\+php@{validate.\+php}}
\subsubsection[{validate\+\_\+schema\+\_\+doc}]{\setlength{\rightskip}{0pt plus 5cm}validate\+\_\+schema\+\_\+doc (
\begin{DoxyParamCaption}
\item[{}]{\$xml\+\_\+file, }
\item[{}]{\$table\+\_\+element}
\end{DoxyParamCaption}
)}}\label{validate_8php_ae55c7ee778b9cb10a5bf33a3047c5586}




Validate a table definition in the X\+M\+L Schema Language. Check that the size attributes is only given for F\+L\+O\+A\+T and \mbox{[}V\+A\+R\mbox{]}C\+H\+A\+R types, and that it is always present for V\+A\+R\+C\+H\+A\+R.

Check that auto\+\_\+increment is only given for (big)number types.

Check for C\+U\+B\+R\+I\+D-\/only/mysql+\+M\+Ssql-\/only attributes 'auto\+\_\+increment' and 'tinytext'.

\begin{DoxyReturn}{Returns}

\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em \$xml\+\_\+file} & \\
\hline
{\em \$table\+\_\+element} & \\
\hline
\end{DoxyParams}
Replaces the \hyperlink{classContext}{Context} class in X\+E.

\begin{DoxyReturn}{Returns}









\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em \$db\+\_\+info} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}



\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em \$str} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}









\end{DoxyReturn}


\begin{DoxyReturn}{Returns}

\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em \$property} & \\
\hline
\end{DoxyParams}


\begin{DoxyReturn}{Returns}

\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em \$property} & \\
\hline
\end{DoxyParams}


Definition at line 1001 of file validate.\+php.

\hypertarget{validate_8php_acc6fcea31bae0e5c66af9431bbe89ed3}{\index{validate.\+php@{validate.\+php}!validate\+\_\+select\+\_\+query@{validate\+\_\+select\+\_\+query}}
\index{validate\+\_\+select\+\_\+query@{validate\+\_\+select\+\_\+query}!validate.\+php@{validate.\+php}}
\subsubsection[{validate\+\_\+select\+\_\+query}]{\setlength{\rightskip}{0pt plus 5cm}validate\+\_\+select\+\_\+query (
\begin{DoxyParamCaption}
\item[{}]{\$xml\+\_\+file, }
\item[{}]{\$query\+\_\+element}
\end{DoxyParamCaption}
)}}\label{validate_8php_acc6fcea31bae0e5c66af9431bbe89ed3}




Additional checks to validate a query X\+M\+L, that can not be properly expressed in the schema definition (.xsd) file for the query.

Most likely the conditions explicitly coded and checked for here can also be expressed as X\+Path queries.

\begin{DoxyReturn}{Returns}

\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em \$xml\+\_\+file} & \\
\hline
{\em \$query\+\_\+element} & \\
\hline
\end{DoxyParams}


Definition at line 694 of file validate.\+php.

\hypertarget{validate_8php_af9c61a8b17e64da32042acf1f10a749e}{\index{validate.\+php@{validate.\+php}!validate\+\_\+update\+\_\+query@{validate\+\_\+update\+\_\+query}}
\index{validate\+\_\+update\+\_\+query@{validate\+\_\+update\+\_\+query}!validate.\+php@{validate.\+php}}
\subsubsection[{validate\+\_\+update\+\_\+query}]{\setlength{\rightskip}{0pt plus 5cm}validate\+\_\+update\+\_\+query (
\begin{DoxyParamCaption}
\item[{}]{\$xml\+\_\+file, }
\item[{}]{\$query\+\_\+element}
\end{DoxyParamCaption}
)}}\label{validate_8php_af9c61a8b17e64da32042acf1f10a749e}




\begin{DoxyReturn}{Returns}

\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em \$xml\+\_\+file} & \\
\hline
{\em \$query\+\_\+element} & \\
\hline
\end{DoxyParams}


Definition at line 729 of file validate.\+php.

\hypertarget{validate_8php_a208d0609e6ad89408ad82c71b30e8611}{\index{validate.\+php@{validate.\+php}!validate\+\_\+xml\+\_\+query@{validate\+\_\+xml\+\_\+query}}
\index{validate\+\_\+xml\+\_\+query@{validate\+\_\+xml\+\_\+query}!validate.\+php@{validate.\+php}}
\subsubsection[{validate\+\_\+xml\+\_\+query}]{\setlength{\rightskip}{0pt plus 5cm}validate\+\_\+xml\+\_\+query (
\begin{DoxyParamCaption}
\item[{}]{\$xml\+\_\+file, }
\item[{}]{\$query\+\_\+element}
\end{DoxyParamCaption}
)}}\label{validate_8php_a208d0609e6ad89408ad82c71b30e8611}




\begin{DoxyReturn}{Returns}

\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em \$xml\+\_\+file} & \\
\hline
{\em \$query\+\_\+element} & \\
\hline
\end{DoxyParams}
Saves working directory and restores it upon destruction. Only use with single-\/threaded php S\+A\+P\+Is like C\+L\+I.

\begin{DoxyReturn}{Returns}



\end{DoxyReturn}


Definition at line 815 of file validate.\+php.



\subsection{Variable Documentation}
\hypertarget{validate_8php_aeb18ba5c86f2000ce5dd010acff58413}{\index{validate.\+php@{validate.\+php}!\$auto\+\_\+schema@{\$auto\+\_\+schema}}
\index{\$auto\+\_\+schema@{\$auto\+\_\+schema}!validate.\+php@{validate.\+php}}
\subsubsection[{\$auto\+\_\+schema}]{\setlength{\rightskip}{0pt plus 5cm}\$auto\+\_\+schema = N\+U\+L\+L}}\label{validate_8php_aeb18ba5c86f2000ce5dd010acff58413}


Definition at line 1229 of file validate.\+php.

\hypertarget{validate_8php_a45b77e89b244f7f9d70aac2006151525}{\index{validate.\+php@{validate.\+php}!\$cmdname@{\$cmdname}}
\index{\$cmdname@{\$cmdname}!validate.\+php@{validate.\+php}}
\subsubsection[{\$cmdname}]{\setlength{\rightskip}{0pt plus 5cm}\$cmdname = {\bf C\+M\+D\+\_\+\+N\+A\+M\+E}}}\label{validate_8php_a45b77e89b244f7f9d70aac2006151525}


Definition at line 1214 of file validate.\+php.

\hypertarget{validate_8php_a95b15eb9cb20bddf2214b8996fad3158}{\index{validate.\+php@{validate.\+php}!\$dom\+Document@{\$dom\+Document}}
\index{\$dom\+Document@{\$dom\+Document}!validate.\+php@{validate.\+php}}
\subsubsection[{\$dom\+Document}]{\setlength{\rightskip}{0pt plus 5cm}\$dom\+Document = new D\+O\+M\+Document()}}\label{validate_8php_a95b15eb9cb20bddf2214b8996fad3158}


Definition at line 1854 of file validate.\+php.

\hypertarget{validate_8php_a83018d9153d17d91fbcf3bc10158d34f}{\index{validate.\+php@{validate.\+php}!\$i@{\$i}}
\index{\$i@{\$i}!validate.\+php@{validate.\+php}}
\subsubsection[{\$i}]{\setlength{\rightskip}{0pt plus 5cm}\$i = 1}}\label{validate_8php_a83018d9153d17d91fbcf3bc10158d34f}


Definition at line 1856 of file validate.\+php.

\hypertarget{validate_8php_a7a7edb3be73e5594d8856ac68aecd5ca}{\index{validate.\+php@{validate.\+php}!\$query\+\_\+args@{\$query\+\_\+args}}
\index{\$query\+\_\+args@{\$query\+\_\+args}!validate.\+php@{validate.\+php}}
\subsubsection[{\$query\+\_\+args}]{\setlength{\rightskip}{0pt plus 5cm}\$query\+\_\+args = N\+U\+L\+L}}\label{validate_8php_a7a7edb3be73e5594d8856ac68aecd5ca}


Definition at line 1234 of file validate.\+php.

\hypertarget{validate_8php_a809bf1b50077e0d0a61a22a9c29e45f2}{\index{validate.\+php@{validate.\+php}!\$query\+\_\+args\+\_\+file@{\$query\+\_\+args\+\_\+file}}
\index{\$query\+\_\+args\+\_\+file@{\$query\+\_\+args\+\_\+file}!validate.\+php@{validate.\+php}}
\subsubsection[{\$query\+\_\+args\+\_\+file}]{\setlength{\rightskip}{0pt plus 5cm}\$query\+\_\+args\+\_\+file = N\+U\+L\+L}}\label{validate_8php_a809bf1b50077e0d0a61a22a9c29e45f2}


Definition at line 1235 of file validate.\+php.

\hypertarget{validate_8php_a71edb70aa44d79c211ac52816d93b852}{\index{validate.\+php@{validate.\+php}!\$query\+\_\+user\+\_\+args@{\$query\+\_\+user\+\_\+args}}
\index{\$query\+\_\+user\+\_\+args@{\$query\+\_\+user\+\_\+args}!validate.\+php@{validate.\+php}}
\subsubsection[{\$query\+\_\+user\+\_\+args}]{\setlength{\rightskip}{0pt plus 5cm}while (\$argc $>$=2 \&\&\$argv\mbox{[}1\mbox{]}\mbox{[}0\mbox{]}== '-\/') {\bf if} (\$argc$<$ 2$\vert$$\vert$(\$argc==2 \&\&in\+\_\+array(\$argv\mbox{[}1\mbox{]}, array('-\/-\/help', '-\/-\/usage', '/?', '-\/?', '-\/h')))) \$query\+\_\+user\+\_\+args = array()}}\label{validate_8php_a71edb70aa44d79c211ac52816d93b852}


Definition at line 1415 of file validate.\+php.

\hypertarget{validate_8php_a87d4dc54461ff155cd633f2ece7cd9e4}{\index{validate.\+php@{validate.\+php}!\$retcode@{\$retcode}}
\index{\$retcode@{\$retcode}!validate.\+php@{validate.\+php}}
\subsubsection[{\$retcode}]{\setlength{\rightskip}{0pt plus 5cm}{\bf if} (!defined('S\+T\+D\+E\+R\+R')) {\bf if} (!defined('\+\_\+\+\_\+\+D\+I\+R\+\_\+\+\_\+')) \$retcode = new {\bf Return\+Code}({\bf Return\+Code\+::\+R\+E\+T\+C\+O\+D\+E\+\_\+\+S\+U\+C\+C\+E\+S\+S})}}\label{validate_8php_a87d4dc54461ff155cd633f2ece7cd9e4}


Definition at line 1228 of file validate.\+php.

\hypertarget{validate_8php_a72d6f00099d1020a9938b75d78d31db3}{\index{validate.\+php@{validate.\+php}!\$schema\+\_\+file@{\$schema\+\_\+file}}
\index{\$schema\+\_\+file@{\$schema\+\_\+file}!validate.\+php@{validate.\+php}}
\subsubsection[{\$schema\+\_\+file}]{\setlength{\rightskip}{0pt plus 5cm}\$schema\+\_\+file = N\+U\+L\+L}}\label{validate_8php_a72d6f00099d1020a9938b75d78d31db3}


Definition at line 1842 of file validate.\+php.

\hypertarget{validate_8php_a8da6d5929566e961bc11f25104519c1a}{\index{validate.\+php@{validate.\+php}!\$schema\+\_\+language@{\$schema\+\_\+language}}
\index{\$schema\+\_\+language@{\$schema\+\_\+language}!validate.\+php@{validate.\+php}}
\subsubsection[{\$schema\+\_\+language}]{\setlength{\rightskip}{0pt plus 5cm}\$schema\+\_\+language = N\+U\+L\+L}}\label{validate_8php_a8da6d5929566e961bc11f25104519c1a}


Definition at line 1230 of file validate.\+php.

\hypertarget{validate_8php_afdc62b6a8a4984ca9a53a1431233ed9a}{\index{validate.\+php@{validate.\+php}!\$schemas\+\_\+set@{\$schemas\+\_\+set}}
\index{\$schemas\+\_\+set@{\$schemas\+\_\+set}!validate.\+php@{validate.\+php}}
\subsubsection[{\$schemas\+\_\+set}]{\setlength{\rightskip}{0pt plus 5cm}\$schemas\+\_\+set}}\label{validate_8php_afdc62b6a8a4984ca9a53a1431233ed9a}
{\bfseries Initial value\+:}
\begin{DoxyCode}
=
        array
            (
                \textcolor{stringliteral}{'delete'} => \_\_DIR\_\_ . \textcolor{stringliteral}{'/xml\_delete.xsd'},
                \textcolor{stringliteral}{'update'} => \_\_DIR\_\_ . \textcolor{stringliteral}{'/xml\_update.xsd'},
                \textcolor{stringliteral}{'select'} => \_\_DIR\_\_ . \textcolor{stringliteral}{'/xml\_select.xsd'},
                \textcolor{stringliteral}{'insert'} => \_\_DIR\_\_ . \textcolor{stringliteral}{'/xml\_insert.xsd'},
                \textcolor{stringliteral}{'insert-select'} => \_\_DIR\_\_ . \textcolor{stringliteral}{'/xml\_insert\_select.xsd'}
            )
\end{DoxyCode}


Definition at line 1843 of file validate.\+php.

\hypertarget{validate_8php_a33587a1c0ee8a26e80e32ffac472df40}{\index{validate.\+php@{validate.\+php}!\$skip\+\_\+query\+\_\+id@{\$skip\+\_\+query\+\_\+id}}
\index{\$skip\+\_\+query\+\_\+id@{\$skip\+\_\+query\+\_\+id}!validate.\+php@{validate.\+php}}
\subsubsection[{\$skip\+\_\+query\+\_\+id}]{\setlength{\rightskip}{0pt plus 5cm}\$skip\+\_\+query\+\_\+id = N\+U\+L\+L}}\label{validate_8php_a33587a1c0ee8a26e80e32ffac472df40}


Definition at line 1231 of file validate.\+php.

\hypertarget{validate_8php_ab7d4a5db53db0f967ab81c779a5b0ccb}{\index{validate.\+php@{validate.\+php}!\$table\+\_\+schema@{\$table\+\_\+schema}}
\index{\$table\+\_\+schema@{\$table\+\_\+schema}!validate.\+php@{validate.\+php}}
\subsubsection[{\$table\+\_\+schema}]{\setlength{\rightskip}{0pt plus 5cm}\$table\+\_\+schema = \+\_\+\+\_\+\+D\+I\+R\+\_\+\+\_\+ . '/xml\+\_\+create\+\_\+table.\+xsd'}}\label{validate_8php_ab7d4a5db53db0f967ab81c779a5b0ccb}


Definition at line 1852 of file validate.\+php.

\hypertarget{validate_8php_a0e24775f133afa5748f8510c4a76f993}{\index{validate.\+php@{validate.\+php}!\$validate\+\_\+only@{\$validate\+\_\+only}}
\index{\$validate\+\_\+only@{\$validate\+\_\+only}!validate.\+php@{validate.\+php}}
\subsubsection[{\$validate\+\_\+only}]{\setlength{\rightskip}{0pt plus 5cm}\$validate\+\_\+only = N\+U\+L\+L}}\label{validate_8php_a0e24775f133afa5748f8510c4a76f993}


Definition at line 1233 of file validate.\+php.

\hypertarget{validate_8php_a4dedc743cbf229659efcb0ad9f6c6cab}{\index{validate.\+php@{validate.\+php}!\$validate\+\_\+query\+\_\+type@{\$validate\+\_\+query\+\_\+type}}
\index{\$validate\+\_\+query\+\_\+type@{\$validate\+\_\+query\+\_\+type}!validate.\+php@{validate.\+php}}
\subsubsection[{\$validate\+\_\+query\+\_\+type}]{\setlength{\rightskip}{0pt plus 5cm}\$validate\+\_\+query\+\_\+type}}\label{validate_8php_a4dedc743cbf229659efcb0ad9f6c6cab}
{\bfseries Initial value\+:}
\begin{DoxyCode}
= 
    array
        (
            
                            
                            
                            
            \textcolor{stringliteral}{'insert-select'} => \textcolor{stringliteral}{'validate\_insert\_select\_query'},
            \textcolor{stringliteral}{'update'} => \textcolor{stringliteral}{'validate\_update\_query'},
            \textcolor{stringliteral}{'select'} => \textcolor{stringliteral}{'validate\_select\_query'},
            \textcolor{stringliteral}{'delete'} => \textcolor{stringliteral}{'validate\_delete\_query'}
        )
\end{DoxyCode}


Definition at line 795 of file validate.\+php.

\hypertarget{validate_8php_aa5ad575ad128f7157c6336775537072e}{\index{validate.\+php@{validate.\+php}!\$xe\+\_\+path@{\$xe\+\_\+path}}
\index{\$xe\+\_\+path@{\$xe\+\_\+path}!validate.\+php@{validate.\+php}}
\subsubsection[{\$xe\+\_\+path}]{\setlength{\rightskip}{0pt plus 5cm}\$xe\+\_\+path = N\+U\+L\+L}}\label{validate_8php_aa5ad575ad128f7157c6336775537072e}


Definition at line 1232 of file validate.\+php.

\hypertarget{validate_8php_a0b8cd04242aae1a86ebfb94e357edf41}{\index{validate.\+php@{validate.\+php}!C\+M\+D\+\_\+\+N\+A\+M\+E@{C\+M\+D\+\_\+\+N\+A\+M\+E}}
\index{C\+M\+D\+\_\+\+N\+A\+M\+E@{C\+M\+D\+\_\+\+N\+A\+M\+E}!validate.\+php@{validate.\+php}}
\subsubsection[{C\+M\+D\+\_\+\+N\+A\+M\+E}]{\setlength{\rightskip}{0pt plus 5cm}const C\+M\+D\+\_\+\+N\+A\+M\+E basename(\$argv\mbox{[}0\mbox{]})}}\label{validate_8php_a0b8cd04242aae1a86ebfb94e357edf41}


Definition at line 1213 of file validate.\+php.

\hypertarget{validate_8php_abe4cc9788f52e49485473dc699537388}{\index{validate.\+php@{validate.\+php}!try@{try}}
\index{try@{try}!validate.\+php@{validate.\+php}}
\subsubsection[{try}]{\setlength{\rightskip}{0pt plus 5cm}try}}\label{validate_8php_abe4cc9788f52e49485473dc699537388}
{\bfseries Initial value\+:}
\begin{DoxyCode}
\{
    
    date\_default\_timezone\_set(\textcolor{stringliteral}{'Europe/Bucharest'})
\end{DoxyCode}


Definition at line 1209 of file validate.\+php.

